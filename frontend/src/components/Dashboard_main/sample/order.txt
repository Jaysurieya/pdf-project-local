import React, { useState } from 'react';
import Navbar from './components/Navbar';
import Hero from './components/Hero';
import Tools from './components/Tools';
import Features from './components/Features';
import Footer from './components/Footer';
import AIAssistant from './components/AIAssistant';
import Login from './components/Login';
import ToolWorkspace from './components/ToolWorkspace';
import { AnimatePresence, motion } from 'framer-motion';
import { PDFTool } from './types';

const App: React.FC = () => {
  const [currentPage, setCurrentPage] = useState<'home' | 'login'>('home');
  const [selectedTool, setSelectedTool] = useState<PDFTool | null>(null);

  const handleToolSelect = (tool: PDFTool) => {
    setSelectedTool(tool);
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };

  const handleNavigate = (page: 'home' | 'login') => {
    setCurrentPage(page);
    setSelectedTool(null); // Clear selected tool when navigating
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };

  return (
    // Removed 'bg-white' and 'dark:bg-slate-950' to allow the body's 'aurora-bg' to control global theme
    <div className="min-h-screen transition-colors duration-300 relative z-0">
      <Navbar currentPage={currentPage} onNavigate={handleNavigate} />
      
      <main>
        <AnimatePresence mode="wait">
          {currentPage === 'login' ? (
             <motion.div
              key="login"
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              exit={{ opacity: 0 }}
              transition={{ duration: 0.3 }}
            >
              <Login onBack={() => handleNavigate('home')} />
            </motion.div>
          ) : selectedTool ? (
            <motion.div
              key="tool-workspace"
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              exit={{ opacity: 0 }}
              transition={{ duration: 0.3 }}
            >
              <ToolWorkspace tool={selectedTool} onBack={() => setSelectedTool(null)} />
            </motion.div>
          ) : (
            <motion.div
              key="home"
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              exit={{ opacity: 0 }}
              transition={{ duration: 0.3 }}
            >
              <Hero />
              <Tools onToolSelect={handleToolSelect} />
              <Features />
              <Footer />
              <AIAssistant />
            </motion.div>
          )}
        </AnimatePresence>
      </main>
    </div>
  );
};

export default App;